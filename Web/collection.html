<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta name="description" content="Final Project">
    <meta name="author" content="Tjalfe MÃ¸ller, David Carl & Kasper Ravn Breindal">
    <link rel="icon" href="img/favicon.png">
    <title>MusicProject</title>
    <!-- Bootstrap core CSS -->
    <link href="bootstrap/css/bootstrap.css" rel="stylesheet">
    <link href="css/main.css" rel="stylesheet">
    <link rel="stylesheet" href="css/collection.css">
</head>

<body>
    <div class="container main-div">
        <div class="top-div">
            <h1 class="text-center main-header">YourMusic!<small> for managing your shit.</small></h1>
        </div>
        <div class="gallery">
            <h3><small class="totalAlbums">##</small> albums in your collection.</h3>
            <div class="img">
                <a target="_blank" href="" target="_blank"><img src="img/darkside.jpg" class="albumImg"></a>
                <div class="desc">
                    <a class="artistName" href="error.html" target="_blank"><span class="artistSpan">Pink Floyd</span></a><br>
                    <a class="albumName" href="" target="_blank"><span class="albumSpan">Dark Side of the Moon</span></a>
                </div>
            </div>
            <div class="img">
                <a target="_blank" href=""><img src="img/darkside.jpg" class="albumImg"></a>
                <div class="desc">
                    <a class="artistName" href="error.html" target="_blank"><span class="artistSpan">The xx</span></a><br>
                    <a class="albumName" href="" target="_blank"><span class="albumSpan">I See You</span></a>
                </div>
            </div>
            <div class="img">
                <a target="_blank" href=""><img src="img/darkside.jpg" class="albumImg"></a>
                <div class="desc">
                    <a class="artistName" href="error.html" target="_blank"><span class="artistSpan">The 1975</span></a><br>
                    <a class="albumName" href="" target="_blank"><span class="albumSpan">I Like It When You Sleep, for You Are So Beautiful Yet So Unaware of It</span></a>
                </div>
            </div>
        </div>
    </div>
    <script src="js/jquery-3.1.1.min.js"></script>
    <script src="js/jquery.textfill.min.js"></script>
    <script src="bootstrap/js/bootstrap.min.js"></script>
    <script>
        $(function () {
            var albums = $("div.img").length
            $("small.totalAlbums").replaceWith("<small>" + albums + "</small>");
        });
        $(".img").each(function () {
            var i = 0;
            var artistName = jQuery(this).find(".artistName")[i].text;
            artistName = artistName.replace(/ /g, "+");
            var artistLink = "http://last.fm/music/" + artistName;
            jQuery(this).find(".artistName").attr("href", artistLink);

            var albumName = jQuery(this).find(".albumName")[i].text;
            albumName = albumName.replace(/ /g, "+");
            var albumLink = artistLink + "/" + albumName;
            jQuery(this).find(".albumName").attr("href", albumLink);
            jQuery(this).children("a").attr("href", albumLink);


            var apiKey = "3a8d6a8d0cb4132cacd967e9b9bae016";
            var apiLink = "http://ws.audioscrobbler.com/2.0/"
            var jsonLink = apiLink + "?method=album.getinfo&api_key=" + apiKey +
                "&artist=" + artistName + "&album=" + albumName + "&format=json";

            //jQuery(this).find(".albumImg").attr("style", "display:none");
            var $imgLink = JQuery(this).find(".albumImg");
            $.getJSON(jsonLink, $imgLink, function (data) {
                var albumString = data.album.image[2]["#text"];
                alert($imgLink);
                imgLink.attr("style", "display:none");
            })


            i++;
        })
    </script>
</body>

</html>